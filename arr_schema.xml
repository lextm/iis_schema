<!--
    
    IIS Application Request Router configuration schema.
    
    ** Please DO NOT edit this file yourself. **
    
    If you want to add configuration sections to the schema, you may place 
    them in .xml files similar to this one, in this directory. They will be 
    picked up automatically on startup.

-->

<configSchema>
  <sectionSchema name="system.webServer/proxy">
    <attribute name="enabled" type="bool" defaultValue="false"/>
    <attribute name="passConnectionCloseHeader" type="bool" defaultValue="false"/>
    <attribute name="passServerHeader" type="enum" defaultValue="Replace">
        <enum name="Replace" value="0"/>
        <enum name="Remove" value="1"/>
        <enum name="PassThrough" value="2"/>
    </attribute>
    <attribute name="httpVersion" type="enum" defaultValue="PassThrough">
      <enum name="Http10" value="0"/>
      <enum name="Http11" value="1"/>
      <enum name="PassThrough" value="2"/>
    </attribute>
    <attribute name="keepAlive" type="bool" defaultValue="true"/>
    <attribute name="timeout" type="timeSpan" defaultValue="00:02:00" validationType="timeSpanRange" validationParameter="1,86400,1"/>
    <attribute name="preserveHostHeader" type="bool" defaultValue="false"/>
    <attribute name="reverseRewriteHostInResponseHeaders" type="bool" defaultValue="true"/>
    <attribute name="xForwardedByHeaderName" type="string" defaultValue="X-Forwarded-By"/>
    <attribute name="xForwardedByHeader" type="string"/>
    <attribute name="xForwardedForHeaderName" type="string" defaultValue="X-Forwarded-For"/>
    <attribute name="includePortInXForwardedFor" type="bool" defaultValue="true"/>
    <attribute name="arrResponseHeader" type="bool" defaultValue="true"/>
    <attribute name="sslHeaderName" type="string" defaultValue="X-ARR-SSL"/>
    <attribute name="clientCertHeaderName" type="string" defaultValue="X-ARR-ClientCert"/>
    <attribute name="logGuidName" type="string" defaultValue="X-ARR-LOG-ID"/>
    <attribute name="logCacheHitName" type="string" defaultValue="X-ARR-CACHE-HIT"/>
    <attribute name="maxForwards" type="uint" defaultValue="10"/>
    <attribute name="minResponseBuffer" type="uint" defaultValue="256" validationType="integerRange" validationParameter="0,4194303"/>
    <attribute name="responseBufferLimit" type="uint" defaultValue="4096" validationType="integerRange" validationParameter="0,4194303"/>
    <attribute name="maxResponseHeaderSize" type="uint" defaultValue="65536"/>
    <attribute name="proxy" type="string"/>
    <attribute name="proxyBypass" type="string"/>
    <attribute name="stealthMode" type="bool" defaultValue="false"/>
    <attribute name="clientCertFileName" type="string" />
    <attribute name="clientCertPassword" type="string" caseSensitive="true" encrypted="true" defaultValue="[enc:AesProvider::enc]" />
    <attribute name="clientCertHash" type="string" />
    <attribute name="bufferChunkedResponses" type="bool" defaultValue="true" />
    <element name="cache">
      <attribute name="enabled" type="bool" defaultValue="true"/>
      <attribute name="requestConsolidationEnabled" type="bool" defaultValue="false"/>
      <attribute name="requestConsolidationTimeout" type="timeSpan" defaultValue="00:00:00.1" />
      <attribute name="queryStringHandling" type="enum" defaultValue="Ignore">
        <enum name="Ignore" value="0"/>
        <enum name="NoCaching" value="1"/>
        <enum name="Accept" value="2"/>
      </attribute>
      <attribute name="validationInterval" type="timeSpan" defaultValue="00:01:00" validationType="timeSpanRange" validationParameter="0,86400,1"/>
      <method name="GetCounters" extension="Microsoft.Web.Arr.RuntimeState">
        <inputElement>
          <attribute name="nameMatch" type="string"/>
        </inputElement>
        <outputElement>
          <collection addElement="counter">
            <attribute name="nameSpace" type="string" isUniqueKey="true"/>
            <attribute name="lastResetTickCount" type="uint"/>
            <attribute name="cacheHitRequests" type="uint"/>
            <attribute name="cacheMissRequests" type="uint"/>
            <attribute name="cacheHitBytes" type="int64"/>
            <attribute name="cacheMissBytes" type="int64"/>
          </collection>
        </outputElement>
      </method>
      <method name="ResetCounters" extension="Microsoft.Web.Arr.RuntimeState"/>
    </element>
  </sectionSchema>

  <sectionSchema name="system.webServer/diskCache">
    <collection addElement="driveLocation">
      <attribute name="path" type="string" isUniqueKey="true" required="true" validationType="nonEmptyString"/>
      <attribute name="maxUsage" type="uint" required="true"/>
      <attribute name="currentUsage" type="uint" extension="Microsoft.Web.Arr.RuntimeState"/>
      <attribute name="health" type="bool" extension="Microsoft.Web.Arr.RuntimeState"/>
      <method name="SetHealthy" extension="Microsoft.Web.Arr.RuntimeState"/>
      <method name="SetUnhealthy" extension="Microsoft.Web.Arr.RuntimeState"/>
    </collection>
    <element name="sharedDriveLocation">
      <attribute name="path" type="string"/>
      <attribute name="health" type="bool" extension="Microsoft.Web.Arr.RuntimeState"/>
      <method name="SetHealthy" extension="Microsoft.Web.Arr.RuntimeState"/>
      <method name="SetUnhealthy" extension="Microsoft.Web.Arr.RuntimeState"/>
    </element>
    <element name="driveLocationHealth">
      <attribute name="enabled" type="bool" defaultValue="false"/>
      <attribute name="diskQueueLengthLowWatermark" type="uint" defaultValue="15"/>
      <attribute name="diskQueueLengthHighWatermark" type="uint" defaultValue="30"/>
    </element>
    <attribute name="allowedAcceptEncoding" type="string" defaultValue="gzip"/>
    <attribute name="byteRangeSegmentSize" type="uint" defaultValue="256" validationType="integerRange" validationParameter="0,4194303"/>
    <attribute name="scavengerInterval" type="timeSpan" defaultValue="00:05:00" validationType="timeSpanRange" validationParameter="0,86400,1"/>
    <attribute name="lowWatermark" type="uint" defaultValue="80" validationType="integerRange" validationParameter="0,100"/>
    <attribute name="highWatermark" type="uint" defaultValue="90" validationType="integerRange" validationParameter="0,100"/>
    <element name="compression">
      <attribute name="enabled" type="bool" defaultValue="true"/>
      <attribute name="level" type="int" defaultValue="4" validationType="integerRange" validationParameter="0,10"/>
      <collection addElement="add">
        <attribute name="mimeType" type="string" required="true" isUniqueKey="true" validationType="nonEmptyString"/>
        <attribute name="enabled" type="bool" required="true"/>
      </collection>
    </element>
    <method name="FlushUrl" extension="Microsoft.Web.Arr.RuntimeState">
      <inputElement>
        <attribute name="url" type="string"/>
      </inputElement>
      <outputElement>
        <attribute name="errorCode" type="uint"/>
      </outputElement>
    </method>
    <method name="CacheUrl" extension="Microsoft.Web.Arr.RuntimeState">
      <inputElement>
        <attribute name="url" type="string"/>
        <attribute name="logFile" type="string"/>
        <attribute name="myAddress" type="string"/>
        <collection addElement="sibling">
          <attribute name="address" type="string" required="true" isUniqueKey="true" validationType="nonEmptyString"/>
        </collection>
      </inputElement>
      <outputElement>
        <attribute name="httpStatus" type="uint"/>
        <attribute name="errorCode" type="uint"/>
      </outputElement>
    </method>
  </sectionSchema>

  <sectionSchema name="webFarms">
    <attribute name="onDemandHealthCheck" type="bool" defaultValue="false"/>
    <element name="applicationRequestRouting">
      <element name="hostAffinityProviderList">
        <collection addElement="add">
          <attribute name="name" type="string" isUniqueKey="true" required="true" validationType="nonEmptyString"/>
        </collection>
      </element>
    </element>
    <collection addElement="webFarm">
      <attribute name="serverAutoStart" type="bool" defaultValue="true"/>
      <attribute name="passConnectionCloseHeader" type="bool" defaultValue="false"/>
      <attribute name="passServerHeader" type="enum" defaultValue="Replace">
        <enum name="Replace" value="0"/>
        <enum name="Remove" value="1"/>
        <enum name="PassThrough" value="2"/>
      </attribute>
      <element name="applicationRequestRouting">
        <element name="protocol">
          <attribute name="httpVersion" type="enum" defaultValue="PassThrough">
            <enum name="Http10" value="0"/>
            <enum name="Http11" value="1"/>
            <enum name="PassThrough" value="2"/>
          </attribute>
          <attribute name="keepAlive" type="bool" defaultValue="true"/>
          <attribute name="timeout" type="timeSpan" defaultValue="00:00:30" validationType="timeSpanRange" validationParameter="1,86400,1"/>
          <attribute name="preserveHostHeader" type="bool" defaultValue="true"/>
          <attribute name="alternateHostName" type="string" />
          <attribute name="reverseRewriteHostInResponseHeaders" type="bool" defaultValue="false"/>
          <attribute name="xForwardedByHeaderName" type="string" defaultValue="X-Forwarded-By"/>
          <attribute name="xForwardedByHeader" type="string"/>
          <attribute name="xForwardedForHeaderName" type="string" defaultValue="X-Forwarded-For"/>
          <attribute name="includePortInXForwardedFor" type="bool" defaultValue="true"/>
          <attribute name="arrResponseHeader" type="bool" defaultValue="true"/>
          <attribute name="sslHeaderName" type="string" defaultValue="X-ARR-SSL"/>
          <attribute name="clientCertHeaderName" type="string" defaultValue="X-ARR-ClientCert"/>
          <attribute name="logGuidName" type="string" defaultValue="X-ARR-LOG-ID"/>
          <attribute name="logCacheHitName" type="string" defaultValue="X-ARR-CACHE-HIT"/>
          <attribute name="maxForwards" type="uint" defaultValue="10"/>
          <attribute name="minResponseBuffer" type="uint" defaultValue="256" validationType="integerRange" validationParameter="0,4194303"/>
          <attribute name="responseBufferLimit" type="uint" defaultValue="4096" validationType="integerRange" validationParameter="0,4194303"/>
          <attribute name="maxResponseHeaderSize" type="uint" defaultValue="65536"/>
          <attribute name="proxy" type="string"/>
          <attribute name="proxyBypass" type="string"/>
          <attribute name="stealthMode" type="bool" defaultValue="false"/>
          <attribute name="clientCertFileName" type="string" />
          <attribute name="clientCertPassword" type="string" caseSensitive="true" encrypted="true" defaultValue="[enc:AesProvider::enc]" />
          <attribute name="clientCertHash" type="string" />
          <attribute name="bufferChunkedResponses" type="bool" defaultValue="true" />
          <element name="cache">
            <attribute name="enabled" type="bool" defaultValue="true"/>
            <attribute name="requestConsolidationEnabled" type="bool" defaultValue="false"/>
            <attribute name="requestConsolidationTimeout" type="timeSpan" defaultValue="00:00:00.1" />
            <attribute name="queryStringHandling" type="enum" defaultValue="Ignore">
              <enum name="Ignore" value="0"/>
              <enum name="NoCaching" value="1"/>
              <enum name="Accept" value="2"/>
            </attribute>
            <attribute name="validationInterval" type="timeSpan" defaultValue="00:01:00" validationType="timeSpanRange" validationParameter="0,86400,1"/>
            <method name="GetCounters" extension="Microsoft.Web.Arr.RuntimeState">
              <inputElement>
                <attribute name="nameMatch" type="string"/>
              </inputElement>
              <outputElement>
                <collection addElement="counter">
                  <attribute name="nameSpace" type="string" isUniqueKey="true"/>
                  <attribute name="lastResetTickCount" type="uint"/>
                  <attribute name="cacheHitRequests" type="uint"/>
                  <attribute name="cacheMissRequests" type="uint"/>
                  <attribute name="cacheHitBytes" type="int64"/>
                  <attribute name="cacheMissBytes" type="int64"/>
                </collection>
              </outputElement>
            </method>
          </element>
        </element>
        <element name="healthCheck">
          <attribute name="url" type="string"/>
          <attribute name="retries" type="uint" defaultValue="3" validationParameter="0,20" />
          <attribute name="interval" type="timeSpan" defaultValue="00:00:30" validationType="timeSpanRange" validationParameter="0,86400,1"/>
          <attribute name="timeout" type="timeSpan" defaultValue="00:00:30" validationType="timeSpanRange" validationParameter="1,86400,1"/>
          <attribute name="statusCodeMatch" type="string" defaultValue="200-399"/>
          <attribute name="responseMatch" type="string" caseSensitive="true"/>
          <attribute name="liveTrafficFailureCodes" type="string" defaultValue="500-"/>
          <attribute name="maxLiveTrafficFailures" type="uint" defaultValue="10" validationType="integerRange" validationParameter="1,4294967295"/>
          <attribute name="liveTrafficFailurePeriod" type="timeSpan" defaultValue="00:00:00" validationType="timeSpanRange" validationParameter="0,86400,1"/>
          <attribute name="minServers" type="uint" defaultValue="0"/>
        </element>
        <element name="affinity">
          <attribute name="useCookie" type="bool" defaultValue="false"/>
          <attribute name="cookieName" type="string" caseSensitive="true" defaultValue="ARRAffinity" validationType="nonEmptyString"/>
          <attribute name="useHostName" type="bool" defaultValue="false"/>
          <attribute name="hostCountersEnabled" type="bool" defaultValue="true"/>
          <attribute name="useServerProvider" type="bool" defaultValue="false"/>
          <attribute name="timeout" type="timeSpan" defaultValue="00:20:00" validationType="timeSpanRange" validationParameter="60,2592000,60"/>
          <attribute name="useExternalCache" type="bool" defaultValue="false"/>
          <attribute name="ignoreSubDomain" type="bool" defaultValue="false"/>
          <attribute name="ignoreSubDomainClientAffinity" type="bool" defaultValue="false"/>
          <attribute name="ignoreSubDomainFragmentDepth" type="int" defaultValue="2" validationType="integerRange" validationParameter="0,32767"/>
          <attribute name="hostAffinityProvider" type="string" defaultValue="Microsoft.Web.Arr.HostNameRoundRobin"/>
          <attribute name="serverProviderImage" type="string" expanded="true" />
          <collection addElement="host">
            <attribute name="name" type="string" isUniqueKey="true" validationType="nonEmptyString"/>
            <attribute name="servers" type="uint" defaultValue="1" validationType="integerRange"  validationParameter="1,256"/>
            <collection addElement="equivalentHost">
              <attribute name="name" type="string" isUniqueKey="true" validationType="nonEmptyString"/>
            </collection>
          </collection>
          <method name="LookupHostName" extension="Microsoft.Web.Arr.RuntimeState">
            <inputElement>
              <attribute name="name" type="string"/>
            </inputElement>
            <outputElement>
              <collection addElement="server">
                <attribute name="address" type="string" isUniqueKey="true"/>
              </collection>
            </outputElement>
          </method>
          <method name="LookupServer" extension="Microsoft.Web.Arr.RuntimeState">
            <inputElement>
              <attribute name="address" type="string"/>
            </inputElement>
            <outputElement>
              <collection addElement="host">
                <attribute name="name" type="string" isUniqueKey="true"/>
              </collection>
            </outputElement>
          </method>
          <method name="RemoveMapping" extension="Microsoft.Web.Arr.RuntimeState">
            <inputElement>
              <attribute name="serverAddress" type="string"/>
              <attribute name="hostName" type="string"/>
            </inputElement>
          </method>
        </element>
        <element name="loadBalancing">
          <attribute name="algorithm" type="enum" defaultValue="WeightedRoundRobin">
            <enum name="WeightedRoundRobin" value="0"/>
            <enum name="RequestHash" value="4"/>
            <!-- 
              NOTE: LeastRequests, LeastResponseTime and WeightedTotalTraffic
              are no longer supported.  Enum element names remain in order to
              prevent failure after upgrade.
              If an unsupported loadBalancing value is specified, ARR will use
              the default (WeightedRoundRobin).
            -->
            <enum name="LeastRequests" value="1"/>
            <enum name="LeastResponseTime" value="2"/>
            <enum name="WeightedTotalTraffic" value="3"/>
          </attribute>
          <attribute name="leastResponseTimePeriod" type="timeSpan" defaultValue="00:00:05" validationType="timeSpanRange" validationParameter="1,86400,1"/>
          <attribute name="hashServerVariable" type="string" caseSensitive="true"/>
          <attribute name="queryStringNames" type="string"/>
          <attribute name="randomizeLBTies" type="bool" defaultValue="false"/>
        </element>
        <element name="publicKeys">
          <collection addElement="publicKey">
            <attribute name="bytes" type="string" isUniqueKey="true" validationType="nonEmptyString"/>
            <attribute name="algorithmOid" type="string"/>
          </collection>
        </element>
        <method name="ResetCounters" extension="Microsoft.Web.Arr.RuntimeState"/>
      </element>
      <collection addElement="server">
        <element name="applicationRequestRouting">
          <attribute name="hostName" type="string" validationType="nonEmptyString"/>
          <attribute name="weight" type="uint" defaultValue="100" validationType="integerRange" validationParameter="1,4294967295"/>
          <attribute name="httpPort" type="uint" defaultValue="80" validationType="integerRange" validationParameter="1,65535"/>
          <attribute name="httpsPort" type="uint" defaultValue="443" validationType="integerRange" validationParameter="1,65535"/>
          <attribute name="healthCheckAlternateHostName" type="string" validationType="nonEmptyString"/>
          <attribute name="healthCheckAlternatePort" type="uint" defaultValue="0" validationType="integerRange" validationParameter="0,65535"/>
          <method name="SetState" extension="Microsoft.Web.Arr.RuntimeState">
            <inputElement>
              <attribute name="newState" type="enum">
                <enum name="Start" value="0"/>
                <enum name="Drain" value="1"/>
                <enum name="GracefulStop" value="2"/>
                <enum name="ForcefulStop" value="3"/>
              </attribute>
            </inputElement>
          </method>
          <method name="SetHealthy" extension="Microsoft.Web.Arr.RuntimeState"/>
          <method name="SetUnhealthy" extension="Microsoft.Web.Arr.RuntimeState"/>
          <method name="TestHealth" extension="Microsoft.Web.Arr.RuntimeState">
            <inputElement>
              <attribute name="url" type="string"/>
              <attribute name="timeout" type="timeSpan" defaultValue="00:00:30" validationType="timeSpanRange" validationParameter="1,86400,1"/>
              <attribute name="statusCodeMatch" type="string" defaultValue="200-399"/>
              <attribute name="responseMatch" type="string" caseSensitive="true"/>
            </inputElement>
            <outputElement>
              <attribute name="result" type="enum">
                <enum name="Success" value="0"/>
                <enum name="ConnectionFailure" value="1"/>
                <enum name="StatusCodeFailure" value="2"/>
                <enum name="ResponseEntityFailure" value="3"/>
              </attribute>
              <attribute name="httpStatus" type="uint" defaultValue="200"/>
              <attribute name="errorCode" type="uint" defaultValue="0"/>
            </outputElement>
          </method>
          <method name="TestProvider" extension="Microsoft.Web.Arr.RuntimeState">
            <outputElement>
              <attribute name="errorCode" type="uint"/>
            </outputElement>
          </method>
          <element name="counters" extension="Microsoft.Web.Arr.RuntimeState">
            <attribute name="state" type="enum">
              <enum name="Active" value="0"/>
              <enum name="Draining" value="1"/>
              <enum name="Inactive" value="2"/>
            </attribute>
            <attribute name="isHealthy" type="bool"/>
            <attribute name="lastResetTickCount" type="uint"/>
            <attribute name="totalRequests" type="uint"/>
            <attribute name="failedRequests" type="uint"/>
            <attribute name="currentRequests" type="uint"/>
            <attribute name="requestPerSecond" type="uint"/>
            <attribute name="bytesSent" type="int64"/>
            <attribute name="bytesReceived" type="int64"/>
            <attribute name="responseTime" type="int"/>
            <attribute name="totalWebSocketRequests" type="uint"/>
            <attribute name="currentWebSocketRequests" type="uint"/>
            <attribute name="failedWebSocketRequests" type="uint"/>
            <attribute name="webSocketBytesSent" type="int64"/>
            <attribute name="webSocketBytesReceived" type="int64"/>
          </element>
        </element>
      </collection>
    </collection>
  </sectionSchema>
</configSchema>
